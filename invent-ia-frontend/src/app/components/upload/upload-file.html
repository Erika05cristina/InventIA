<div class="upload-container">
  <label class="upload-label">
    <span class="upload-button">
        <span class="material-symbols-rounded icon">folder_open</span>
        Selecciona un archivo Excel
      </span>
    <input type="file" accept=".xlsx, .xls, .csv" (change)="onFileSelected($event)" />
  </label>

  @if (previewData().length > 0) {
    <div class="preview">
      <h3>Vista previa:</h3>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              @for (header of previewData()[0]; track $index) {
                <th>{{ header }}</th>
              }
            </tr>
          </thead>
          <tbody>
            @for (row of previewData().slice(1); track $index) {
              <tr>
                @for (cell of row; track $index) {
                  <td>{{ cell }}</td>
                }
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  }

  <div class="manual-input">
    <label>
      ID del producto:
      <input type="number" [(ngModel)]="productId" />
    </label>

    <label>
      Fecha:
      <input type="date" [(ngModel)]="fecha" />
    </label>

    <button (click)="getPrediction()">Predecir</button>
  </div>

  @if (predictionResult()) {
    <div class="prediction-box">
      <h3>Resultado de predicci√≥n:</h3>
      <ul>
        @for (r of predictionResult(); track r.productId) {
          <li>
            Producto #{{ r.productId }} que se necesita para la fecha {{ r.date }}:
            <strong>{{ r.prediction }}</strong>
          </li>
        }
      </ul>
    </div>
  }
</div>
